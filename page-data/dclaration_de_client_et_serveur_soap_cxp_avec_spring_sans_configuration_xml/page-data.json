{"componentChunkName":"component---src-templates-blog-post-js","path":"/dclaration_de_client_et_serveur_soap_cxp_avec_spring_sans_configuration_xml/","result":{"data":{"site":{"siteMetadata":{"title":"Technical Debt"}},"markdownRemark":{"id":"f127243e-073e-50c2-a29d-0c1cfaea5c4d","excerpt":"Client SOAP Pour activer la validation des flux soap: Server SOAP","html":"<h1>Client SOAP</h1>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@ComponentScan</span><span class=\"token punctuation\">(</span>basePackages <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> “com<span class=\"token punctuation\">.</span>my<span class=\"token punctuation\">.</span><span class=\"token keyword\">package</span>” <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JavaConfig</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token class-name\">Environment</span> env<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyServicePortType</span> <span class=\"token function\">myServiceClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> serviceUrl<span class=\"token operator\">=</span> env<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span>“my<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>url”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">JaxWsProxyFactoryBean</span> factory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JaxWsProxyFactoryBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setAddress</span><span class=\"token punctuation\">(</span>serviceUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        factory<span class=\"token punctuation\">.</span><span class=\"token function\">setServiceClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MyServicePortType</span> e<span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">MyServicePortType</span> <span class=\"token punctuation\">)</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Pour activer la validation des flux soap:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">final</span> <span class=\"token class-name\">MyServicePortType</span> myPortType <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">MyServicePortType</span><span class=\"token punctuation\">)</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">BindingProvider</span><span class=\"token punctuation\">)</span> myPortType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRequestContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>“schema<span class=\"token operator\">-</span>validation<span class=\"token operator\">-</span>enabled”<span class=\"token punctuation\">,</span> “<span class=\"token boolean\">true</span>”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> myPortType<span class=\"token punctuation\">;</span></code></pre></div>\n<h1>Server SOAP</h1>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@ImportResource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> “classpath<span class=\"token operator\">:</span>META<span class=\"token operator\">-</span>INF<span class=\"token operator\">/</span>cxf<span class=\"token operator\">/</span>cxf<span class=\"token punctuation\">.</span>xml”<span class=\"token punctuation\">,</span> “classpath<span class=\"token operator\">:</span>META<span class=\"token operator\">-</span>INF<span class=\"token operator\">/</span>cxf<span class=\"token operator\">/</span>cxf<span class=\"token operator\">-</span>servlet<span class=\"token punctuation\">.</span>xml” <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CXFServletConfiguration</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/* CXF bus for binding.    */</span>\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Bus</span> bus<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">GetVersion</span> getVersionService<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Endpoint</span> <span class=\"token function\">versionEndpoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">EndpointImpl</span> endpoint <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EndpointImpl</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>bus<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>getVersionService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        endpoint<span class=\"token punctuation\">.</span><span class=\"token function\">setAddress</span><span class=\"token punctuation\">(</span>“<span class=\"token operator\">/</span>version”<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        endpoint<span class=\"token punctuation\">.</span><span class=\"token function\">publish</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> endpoint<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"Déclaration de client et serveur SOAP CXF avec Spring sans configuration XML","date":"April 06, 2016","description":null}}},"pageContext":{"slug":"/dclaration_de_client_et_serveur_soap_cxp_avec_spring_sans_configuration_xml/","previous":{"fields":{"slug":"/my_recommended_brackets_extensions_from_johnpapa/"},"frontmatter":{"title":"'My Recommended Brackets Extensions' from johnpapa"}},"next":{"fields":{"slug":"/modifier_le_temps_de_validiter_du_password_du_sudo/"},"frontmatter":{"title":"Modifier le temps de validiter du password du SUDO"}}}},"staticQueryHashes":["2841359383","916993862"]}