{"componentChunkName":"component---src-templates-blog-post-js","path":"/shedlock/","result":{"data":{"site":{"siteMetadata":{"title":"Technical Debt"}},"markdownRemark":{"id":"79cbcd0f-6d9c-5840-af13-104a25d678b9","excerpt":"ShedLock s’assure qu’une tâche ne sera éxecutée qu’une seule fois à un instant t.\nShedLock utilise des verrous en BDD (mysql, Redis, … ). 1 verrou par tâche ou…","html":"<p>ShedLock s’assure qu’une tâche ne sera éxecutée qu’une seule fois à un instant t.\nShedLock utilise des verrous en BDD (mysql, Redis, … ). 1 verrou par tâche ou groupe de tâche.</p>\n<p>Peut-être une alternative à Quartz pour gérer des tâches ordonnancées dans un environnement multi-noeuds.</p>\n<p><a href=\"https://github.com/lukas-krecan/ShedLock\">source</a></p>\n<h3>Dépendances (jdbc lock provider)</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;dependency&gt;\n   &lt;groupId&gt;net.javacrumbs.shedlock&lt;/groupId&gt;\n   &lt;artifactId&gt;shedlock-spring&lt;/artifactId&gt;\n   &lt;version&gt;0.12.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n   &lt;groupId&gt;net.javacrumbs.shedlock&lt;/groupId&gt;\n   &lt;artifactId&gt;shedlock-provider-jdbc-template&lt;/artifactId&gt;\n   &lt;version&gt;0.12.0&lt;/version&gt;\n&lt;/dependency&gt;</code></pre></div>\n<h3>Tâche</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@Scheduled(fixedRate = 6000)\n@SchedulerLock(name = &quot;scheduledTaskName&quot;)\npublic void doYourTask() {\n  // Do your task\n}</code></pre></div>\n<h3>Configuration</h3>\n<p>fin de lock par défaut: defaultLockAtMostFor</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@EnableScheduling\n@Configuration\npublic class SchedulerConfiguration {\n\n    @Bean\n    public LockProvider lockProvider(DataSource dataSource) {\n        return new JdbcTemplateLockProvider(dataSource);\n    }\n\n    @Bean\n    public ScheduledLockConfiguration taskScheduler(LockProvider lockProvider) {\n        return ScheduledLockConfigurationBuilder\n                .withLockProvider(lockProvider)\n                .withPoolSize(10)\n                .withDefaultLockAtMostFor(Duration.ofMinutes(1))\n                .build();\n    }\n}</code></pre></div>\n<p>Projet de test (SpringBoot/Docker): <a href=\"https://github.com/amouchere/shedlockDemo\">https://github.com/amouchere/shedlockDemo</a></p>","frontmatter":{"title":"ShedLock","date":"July 04, 2017","description":null}}},"pageContext":{"slug":"/shedlock/","previous":{"fields":{"slug":"/JGitFlow/"},"frontmatter":{"title":"JGitFlow"}},"next":{"fields":{"slug":"/Liste-d-annotation/"},"frontmatter":{"title":"Liste d'annotation"}}}},"staticQueryHashes":["2841359383","916993862"]}